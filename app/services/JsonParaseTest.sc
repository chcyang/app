import java.sql.Timestamp
import java.time.LocalDateTime
import java.time.format.DateTimeFormatter

import com.fasterxml.jackson.module.scala.DefaultScalaModule

val response = "[\n    {\n        \"id\": 18629957,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-8\",\n        \"keyId\": 8,\n        \"issueType\": {\n            \"id\": 725005,\n            \"projectId\": 146597,\n            \"name\": \"Question\",\n            \"color\": \"#814fbc\",\n            \"displayOrder\": -1\n        },\n        \"summary\": \"Auth２.0　認証についての質問\",\n        \"description\": \"[認証と認可 | Backlog Developer API | Nulab](https://developer.nulab.com/ja/docs/backlog/auth/#%E3%83%AA%E3%82%AF%E3%82%A8%E3%82%B9%E3%83%88%E4%BE%8B)\\nドキュメント記載の通り、認可コード発行API`/OAuth2AccessRequest.action `をアクセスして、認可コードを貰いたいですが\\n想定通りの結果を貰ってくなて、NulabのHomePageのSignInにRedirectしました。\\n\\n以下はアクセスのScreenChapterです。何か設定が間違ったでしょうか？\\n![image][pasted-2021.01.26-16.50.18.png]\\n\\napiKeyのアクセス方でも上手くできますので、今回の課題に特に影響はないですが\\nただ、自分のやり方が悪いか、ドキュメントの記述は不充分であるかを確認したいです、よろしくお願いします。\",\n        \"resolution\": null,\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 1,\n            \"projectId\": 146597,\n            \"name\": \"未対応\",\n            \"color\": \"#ed8077\",\n            \"displayOrder\": 1000\n        },\n        \"assignee\": null,\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [],\n        \"startDate\": null,\n        \"dueDate\": null,\n        \"estimatedHours\": null,\n        \"actualHours\": null,\n        \"parentIssueId\": 18465690,\n        \"createdUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"created\": \"2021-01-26T07:59:32Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-26T08:49:23Z\",\n        \"customFields\": [],\n        \"attachments\": [\n            {\n                \"id\": 10118520,\n                \"name\": \"pasted-2021.01.26-16.50.18.png\",\n                \"size\": 177723,\n                \"createdUser\": {\n                    \"id\": 373653,\n                    \"userId\": \"*RaTnwT3lk0\",\n                    \"name\": \"Rand Chen\",\n                    \"roleType\": 2,\n                    \"lang\": \"ja\",\n                    \"mailAddress\": \"chcyang202@gmail.com\",\n                    \"nulabAccount\": {\n                        \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                        \"name\": \"Rand Chen\",\n                        \"uniqueId\": \"chcyang202\"\n                    },\n                    \"keyword\": \"Rand Chen Rand Chen\"\n                },\n                \"created\": \"2021-01-26T07:59:32Z\"\n            }\n        ],\n        \"sharedFiles\": [],\n        \"stars\": []\n    },\n    {\n        \"id\": 18494117,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-7\",\n        \"keyId\": 7,\n        \"issueType\": {\n            \"id\": 723311,\n            \"projectId\": 146597,\n            \"name\": \"Task\",\n            \"color\": \"#7ea800\",\n            \"displayOrder\": 0\n        },\n        \"summary\": \"提出\",\n        \"description\": \"\",\n        \"resolution\": null,\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 1,\n            \"projectId\": 146597,\n            \"name\": \"未対応\",\n            \"color\": \"#ed8077\",\n            \"displayOrder\": 1000\n        },\n        \"assignee\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [],\n        \"startDate\": \"2021-01-30T00:00:00Z\",\n        \"dueDate\": \"2021-01-30T00:00:00Z\",\n        \"estimatedHours\": 4,\n        \"actualHours\": null,\n        \"parentIssueId\": 18465690,\n        \"createdUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"created\": \"2021-01-19T05:06:48Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-19T05:06:48Z\",\n        \"customFields\": [],\n        \"attachments\": [],\n        \"sharedFiles\": [],\n        \"stars\": []\n    },\n    {\n        \"id\": 18494102,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-6\",\n        \"keyId\": 6,\n        \"issueType\": {\n            \"id\": 723311,\n            \"projectId\": 146597,\n            \"name\": \"Task\",\n            \"color\": \"#7ea800\",\n            \"displayOrder\": 0\n        },\n        \"summary\": \"Wikiの書き及補足\",\n        \"description\": \"Featureについての説明資料\\n目的\\n使い方\\nそのた\",\n        \"resolution\": null,\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 1,\n            \"projectId\": 146597,\n            \"name\": \"未対応\",\n            \"color\": \"#ed8077\",\n            \"displayOrder\": 1000\n        },\n        \"assignee\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [\n            {\n                \"id\": 250235,\n                \"projectId\": 146597,\n                \"name\": \"V1.0\",\n                \"description\": null,\n                \"startDate\": \"2021-01-19T00:00:00Z\",\n                \"releaseDueDate\": \"2021-01-31T00:00:00Z\",\n                \"archived\": false,\n                \"displayOrder\": 0\n            }\n        ],\n        \"startDate\": \"2021-01-28T00:00:00Z\",\n        \"dueDate\": \"2021-01-29T00:00:00Z\",\n        \"estimatedHours\": 4,\n        \"actualHours\": null,\n        \"parentIssueId\": 18465690,\n        \"createdUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"created\": \"2021-01-19T05:06:14Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-22T11:40:33Z\",\n        \"customFields\": [],\n        \"attachments\": [],\n        \"sharedFiles\": [],\n        \"stars\": []\n    },\n    {\n        \"id\": 18493996,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-5\",\n        \"keyId\": 5,\n        \"issueType\": {\n            \"id\": 723311,\n            \"projectId\": 146597,\n            \"name\": \"Task\",\n            \"color\": \"#7ea800\",\n            \"displayOrder\": 0\n        },\n        \"summary\": \"機能実装\",\n        \"description\": \"開発予定の機能を実際に実現する\\nFeatureに関するコード\\n単体テストコード\\n共通コード（あれば）\",\n        \"resolution\": null,\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 2,\n            \"projectId\": 146597,\n            \"name\": \"処理中\",\n            \"color\": \"#4488c5\",\n            \"displayOrder\": 2000\n        },\n        \"assignee\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [\n            {\n                \"id\": 250235,\n                \"projectId\": 146597,\n                \"name\": \"V1.0\",\n                \"description\": null,\n                \"startDate\": \"2021-01-19T00:00:00Z\",\n                \"releaseDueDate\": \"2021-01-31T00:00:00Z\",\n                \"archived\": false,\n                \"displayOrder\": 0\n            }\n        ],\n        \"startDate\": \"2021-01-23T00:00:00Z\",\n        \"dueDate\": \"2021-01-27T00:00:00Z\",\n        \"estimatedHours\": 20,\n        \"actualHours\": null,\n        \"parentIssueId\": 18465690,\n        \"createdUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"created\": \"2021-01-19T05:03:09Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-26T06:47:27Z\",\n        \"customFields\": [],\n        \"attachments\": [\n            {\n                \"id\": 10090364,\n                \"name\": \"commhikari.pdf\",\n                \"size\": 465662,\n                \"createdUser\": {\n                    \"id\": 373653,\n                    \"userId\": \"*RaTnwT3lk0\",\n                    \"name\": \"Rand Chen\",\n                    \"roleType\": 2,\n                    \"lang\": \"ja\",\n                    \"mailAddress\": \"chcyang202@gmail.com\",\n                    \"nulabAccount\": {\n                        \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                        \"name\": \"Rand Chen\",\n                        \"uniqueId\": \"chcyang202\"\n                    },\n                    \"keyword\": \"Rand Chen Rand Chen\"\n                },\n                \"created\": \"2021-01-23T08:01:36Z\"\n            }\n        ],\n        \"sharedFiles\": [],\n        \"stars\": []\n    },\n    {\n        \"id\": 18493942,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-4\",\n        \"keyId\": 4,\n        \"issueType\": {\n            \"id\": 723311,\n            \"projectId\": 146597,\n            \"name\": \"Task\",\n            \"color\": \"#7ea800\",\n            \"displayOrder\": 0\n        },\n        \"summary\": \"開発基盤の構築\",\n        \"description\": \"開発のために、基盤を構築準備\\nFramework導入\\nコンフェグレションの設定\",\n        \"resolution\": {\n            \"id\": 0,\n            \"name\": \"対応済み\"\n        },\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 3,\n            \"projectId\": 146597,\n            \"name\": \"処理済み\",\n            \"color\": \"#5eb5a6\",\n            \"displayOrder\": 3000\n        },\n        \"assignee\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [\n            {\n                \"id\": 250235,\n                \"projectId\": 146597,\n                \"name\": \"V1.0\",\n                \"description\": null,\n                \"startDate\": \"2021-01-19T00:00:00Z\",\n                \"releaseDueDate\": \"2021-01-31T00:00:00Z\",\n                \"archived\": false,\n                \"displayOrder\": 0\n            }\n        ],\n        \"startDate\": \"2021-01-20T00:00:00Z\",\n        \"dueDate\": \"2021-01-22T00:00:00Z\",\n        \"estimatedHours\": 4,\n        \"actualHours\": 4,\n        \"parentIssueId\": 18465690,\n        \"createdUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"created\": \"2021-01-19T05:01:00Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-23T08:11:24Z\",\n        \"customFields\": [],\n        \"attachments\": [],\n        \"sharedFiles\": [],\n        \"stars\": []\n    },\n    {\n        \"id\": 18493812,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-3\",\n        \"keyId\": 3,\n        \"issueType\": {\n            \"id\": 723311,\n            \"projectId\": 146597,\n            \"name\": \"Task\",\n            \"color\": \"#7ea800\",\n            \"displayOrder\": 0\n        },\n        \"summary\": \"取り込む機能の設計\",\n        \"description\": \"既存APIを勉強してから、どんな機能を取り込みできるかを考えながら、概要的の構成を固めます。\\n\\n1. 目的\\n2. 組み合わせる機能\\n3. 実現期間の見積もり（複雑度、完成度）\\n\\n\",\n        \"resolution\": {\n            \"id\": 0,\n            \"name\": \"対応済み\"\n        },\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 3,\n            \"projectId\": 146597,\n            \"name\": \"処理済み\",\n            \"color\": \"#5eb5a6\",\n            \"displayOrder\": 3000\n        },\n        \"assignee\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [\n            {\n                \"id\": 250235,\n                \"projectId\": 146597,\n                \"name\": \"V1.0\",\n                \"description\": null,\n                \"startDate\": \"2021-01-19T00:00:00Z\",\n                \"releaseDueDate\": \"2021-01-31T00:00:00Z\",\n                \"archived\": false,\n                \"displayOrder\": 0\n            }\n        ],\n        \"startDate\": \"2021-01-20T00:00:00Z\",\n        \"dueDate\": \"2021-01-21T00:00:00Z\",\n        \"estimatedHours\": 4,\n        \"actualHours\": 6,\n        \"parentIssueId\": 18465690,\n        \"createdUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"created\": \"2021-01-19T04:58:05Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-23T08:08:32Z\",\n        \"customFields\": [],\n        \"attachments\": [],\n        \"sharedFiles\": [],\n        \"stars\": []\n    },\n    {\n        \"id\": 18493713,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-2\",\n        \"keyId\": 2,\n        \"issueType\": {\n            \"id\": 723311,\n            \"projectId\": 146597,\n            \"name\": \"Task\",\n            \"color\": \"#7ea800\",\n            \"displayOrder\": 0\n        },\n        \"summary\": \"APIのドキュメントを勉強\",\n        \"description\": \"現存のBacklog／typeのAPI資料を勉強して、次の段階の準備を行い\",\n        \"resolution\": {\n            \"id\": 0,\n            \"name\": \"対応済み\"\n        },\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 4,\n            \"projectId\": 146597,\n            \"name\": \"完了\",\n            \"color\": \"#b0be3c\",\n            \"displayOrder\": 4000\n        },\n        \"assignee\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [\n            {\n                \"id\": 250235,\n                \"projectId\": 146597,\n                \"name\": \"V1.0\",\n                \"description\": null,\n                \"startDate\": \"2021-01-19T00:00:00Z\",\n                \"releaseDueDate\": \"2021-01-31T00:00:00Z\",\n                \"archived\": false,\n                \"displayOrder\": 0\n            }\n        ],\n        \"startDate\": \"2021-01-19T00:00:00Z\",\n        \"dueDate\": \"2021-01-20T00:00:00Z\",\n        \"estimatedHours\": 4,\n        \"actualHours\": 3,\n        \"parentIssueId\": 18465690,\n        \"createdUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"created\": \"2021-01-19T04:54:01Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-22T11:39:20Z\",\n        \"customFields\": [],\n        \"attachments\": [],\n        \"sharedFiles\": [],\n        \"stars\": []\n    },\n    {\n        \"id\": 18465690,\n        \"projectId\": 146597,\n        \"issueKey\": \"CHEN-1\",\n        \"keyId\": 1,\n        \"issueType\": {\n            \"id\": 723311,\n            \"projectId\": 146597,\n            \"name\": \"Task\",\n            \"color\": \"#7ea800\",\n            \"displayOrder\": 0\n        },\n        \"summary\": \"お題について \",\n        \"description\": \"陳さん、先ほどはお時間いただきありがとうございました！\\nこちらが課題専用のBacklogです。早速ですがお題についてご案内します。\\n\\nこちらのプロジェクトの中には、開発部長やBacklog、Typetalkの開発メンバーも入っています。\\n何か質問があればお気軽にコメントからお知らせください。\\nその時、通知先に困ると思いますので、迷ったらわたくし（Angela）まで通知をお願いします。\\n\\n## お題：\\nヌーラボの製品を組み込んだソフトウェアの開発をお願い致します。\\n言語はできればScalaでお願いします！\\n\\nコードの規模や内容は特に問いませんが、書き捨てではなく、なるべく実力がわかるような内容をご提示いただければありがたいです。\\n実力というのは、ヌーラボの中で長期的にサービス開発・運用をしていくことを想定したものです。\\n実際の仕事ではありませんし、本業の合間をぬってという形なので、手を抜くところは抜いていただき、その旨記載いただければ問題ありません。\\nソースはこのプロジェクトのGitを活用ください。課題やWikiなども必要におうじて利用していただいてかまいません。\\n期間は1〜2週間以内ぐらいでいただけると助かりますが、難しい場合はご相談くださいませ。\\nお手数おかけして申し訳ございませんが、よろしくお願い致します。\\nまずはこのBacklogにログインされたらコメントお願い致します。\\n\\n## 参考：各チームで使っている言語\\nBacklog : Scala (Play Framework)\\nCacoo : Go\\nTypetalk : Scala (Play Framework)\\nNulab Apps : Java (Spring) , Kotlin\\nバックオフィスエンジニア：Python, Google Apps Script, Scala (Play Framework)\",\n        \"resolution\": null,\n        \"priority\": {\n            \"id\": 3,\n            \"name\": \"中\"\n        },\n        \"status\": {\n            \"id\": 2,\n            \"projectId\": 146597,\n            \"name\": \"処理中\",\n            \"color\": \"#4488c5\",\n            \"displayOrder\": 2000\n        },\n        \"assignee\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"category\": [],\n        \"versions\": [],\n        \"milestone\": [],\n        \"startDate\": \"2021-01-19T00:00:00Z\",\n        \"dueDate\": \"2021-02-01T00:00:00Z\",\n        \"estimatedHours\": null,\n        \"actualHours\": null,\n        \"parentIssueId\": null,\n        \"createdUser\": {\n            \"id\": 79500,\n            \"userId\": null,\n            \"name\": \"Angela (Sayaka Adachi) \",\n            \"roleType\": 1,\n            \"lang\": \"ja\",\n            \"mailAddress\": null,\n            \"nulabAccount\": {\n                \"nulabId\": \"NfrywOby76nzWDZ0cLGxWCrldYcPL480yrfqoPF3nRrAFRp1r4\",\n                \"name\": \"Angela (Sayaka Adachi) \",\n                \"uniqueId\": \"Angela_sayaka\"\n            },\n            \"keyword\": \"Angela (Sayaka Adachi)  Angela (Sayaka Adachi) \"\n        },\n        \"created\": \"2021-01-18T09:53:44Z\",\n        \"updatedUser\": {\n            \"id\": 373653,\n            \"userId\": \"*RaTnwT3lk0\",\n            \"name\": \"Rand Chen\",\n            \"roleType\": 2,\n            \"lang\": \"ja\",\n            \"mailAddress\": \"chcyang202@gmail.com\",\n            \"nulabAccount\": {\n                \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                \"name\": \"Rand Chen\",\n                \"uniqueId\": \"chcyang202\"\n            },\n            \"keyword\": \"Rand Chen Rand Chen\"\n        },\n        \"updated\": \"2021-01-19T05:08:41Z\",\n        \"customFields\": [],\n        \"attachments\": [],\n        \"sharedFiles\": [],\n        \"stars\": [\n            {\n                \"id\": 4081544,\n                \"comment\": \"組み込んだソフトウェア\",\n                \"url\": \"https://nulab-exam.backlog.jp/view/CHEN-1\",\n                \"title\": \"<span class=\\\"Fn\\\">Angela (Sayaka Adachi) </span>さんが <span class=\\\"Action AddIssue\\\">課題</span>を追加\",\n                \"presenter\": {\n                    \"id\": 373653,\n                    \"userId\": \"*RaTnwT3lk0\",\n                    \"name\": \"Rand Chen\",\n                    \"roleType\": 2,\n                    \"lang\": \"ja\",\n                    \"mailAddress\": \"chcyang202@gmail.com\",\n                    \"nulabAccount\": {\n                        \"nulabId\": \"ABFqozryQ3yuynNrvbHlu41HOKCGR0CbAWfGl0xBkJLJYb9Vk0\",\n                        \"name\": \"Rand Chen\",\n                        \"uniqueId\": \"chcyang202\"\n                    },\n                    \"keyword\": \"Rand Chen Rand Chen\"\n                },\n                \"created\": \"2021-01-18T14:41:38Z\"\n            }\n        ]\n    }\n]"


import com.fasterxml.jackson.databind.ObjectMapper

val mapper = new ObjectMapper
mapper.registerModule(DefaultScalaModule)
val issues = mapper.readValue(response, classOf[List[Map[String, Object]]])
//val valid = json.as[Map[String, String]]

//map.map{
//  map=> println(map.get("summary"))
//    println(map.get("parentIssueId"))
//    println(map.get("actualHours"))
//    println(map.get("parentIssueId"))
//    println(map.get("id"))
//    println(map.get("startDate"))
//    println(map.get("dueDate"))
//}

//val issueIdList = issues.map{
//  map =>
//    println(map.get("id"))
//    map.get("id")
//}

//val parentIssueIdList = issues.map(v => v.get("parentIssueId"))
//  .map(_.flatMap(Option(_)))
//  .filterNot(_ == None)


//val parentIssueIdList = issues.map { v =>
//
//  val id = v.get("parentIssueId")
//    .flatMap(Option(_))
//
//  if(v.get("actualHours") == Some(null)) println("startDate is Empty!!!!!!")
//  println(v.get("actualHours"))
//
//  id match {
//    case Some(value) =>v
//    case None =>None
//  }
//
//  id
//}
//  .filterNot(_ == None)


val issueMaps = issues.map {
  map =>
    map.get("id").map {
      id =>
        val actualHours = map.get("actualHours")
        val estimatedHours = map.get("estimatedHours")
        val startDate = map.get("startDate")
        val dueDate = map.get("dueDate")

        if (startDate == Some(null) || dueDate == Some(null)
          || actualHours == Some(null) || estimatedHours == Some(null)) None
        else {
          val startDateC = LocalDateTime.parse(startDate.getOrElse("").toString, DateTimeFormatter.ISO_ZONED_DATE_TIME)
          val dueDateC = LocalDateTime.parse(dueDate.getOrElse("").toString, DateTimeFormatter.ISO_ZONED_DATE_TIME)
          println(startDateC, dueDateC)
          val start = Timestamp.valueOf(startDateC).getTime
          val due = Timestamp.valueOf(dueDateC).getTime
          val between = (due - start) / (24 * 60 * 60 * 1000)
          val actualHoursData = actualHours.getOrElse(0).toString.toFloat
          val estimatedHoursData = estimatedHours.getOrElse(0).toString.toFloat
          val averageActulHours = actualHoursData / between
          val averageEstimateHours = estimatedHoursData / between
          val seq = for (i <- 0.toLong until between) yield (startDateC.plusDays(i).toString -> (averageActulHours, averageEstimateHours))
          val map2 = seq.map { value => (value._1 -> value._2) }.toMap

          println(map2)
          Map(id -> map2)
        }
    }
      .filterNot(_ == None)
}.filterNot(_ == None)

val parentIssueIdList = issues.map(v => v.get("parentIssueId"))
  .map(_.flatMap(Option(_)))
  .filterNot(_ == None).toSet

val actualIssueList = issueMaps.flatMap{
  _.get
}.filterNot{
  map => parentIssueIdList.contains(Option(map._1))
}


//val list123 = issueMaps.flatMap {
//  _.get
//}.flatMap(_._2).groupBy(_._1)
//
//val result = list123.
//  view.mapValues(seq => seq.map(_._2)
//  .reduce((a, b) => (a._1 + b._1, a._2 + b._2)))
//  .toMap

